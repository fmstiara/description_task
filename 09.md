# マイグレーションファイルを内容を間違えて作って、migrateもしてしまったがどうしたらよいか
# 解答記述欄

直近の間違ったマイグレーションファイルを実行する前のDBの状態に戻すには```rails db:rollback```を用います。
複数のマイグレーションファイルを戻す場合はコマンドの後ろに```STEP=n(戻す回数)```と書き加えましょう。
間違える前の変更までDBの状態を戻せたら間違えたマイグレーションファイルを削除し正しいマイグレーションファイルを作成した後、```rails db:migrate```でマイグレーションファイルを読み込み直しましょう。



# レビュー記述欄
一見、内容に問題はなさそうですが、例外的に問題が生じる場合があります。

> 間違える前の変更までDBの状態を戻せたら間違えたマイグレーションファイルを削除
この指摘で削除したマイグレーションファイルが、その他のモデルの親モデルだった場合です。

例）
migration1: 親モデル
migration2: 子モデル(中に、親モデルの外部キーを持つ、という記述があるとします）

これのmigration1を削除すると、migration2の内容で親モデルのkeyを参照すると書いているのに、
**migrationの順番的に**、親モデルなんてないぞ！、となります。

なので適切に質問文に答えるのであれば、
- 単に、既存のマイグレーションファイルの内容を**変更する**マイグレーションファイルを作成する。
- 既存のマイグレーションファイルを修正して、`rails db:migrate:reset`を行う
  - rollbackをして、ファイルを修正して、migrateするのと、近いです。
  - 違いは、migrate:resetだとデータが削除されてしまうことです。
などが良いです。

と、ここまでの内容を自分の言葉で説明できるようになっていると良いです！
